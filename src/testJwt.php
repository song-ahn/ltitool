<?php

require_once __DIR__ . '/../vendor/autoload.php';
use Firebase\JWT\JWT;
use Firebase\JWT\JWK;
use Firebase\JWT\Key;

$key = [
    "kid" => "ebb5b0c6-d76d-460a-8d6c-8208fffb846b",
    "kty" => "RSA",
    "use" => "sig",
    "n"   => "sU_Xwzr0DY-4_ySH8j4yBrGaQbE0gvAPv_oEnDRSWXLtuecueVR6EB8zvsa0PN7VtUQn0ke7QDU8rbnvOV40e_50dZvOcSV56u8piO5FNQLr57obKlpjjaJ7Px07ix-ln1h1lzxiXnM0ssL5EnpBMws1LkfKADMAgqwhVp4E0V3LGJZUqQPhvj8jrYim-n1CDdhuM8Zu24jCzAlFdbK_I7UaabJj9dfYyUKrUquLZtvxpsJWZQSALeOpryWCvkfjtRQYeGPQ3P8JsH8_zg_z_HOlGNCl9TUESRJIzxRl48ykuCb4HQ4JgOBUXg2XK8DaSKrsFzjWAklu6vpEeH1s7w",
    "e"   => "AQAB",
    "exp" => 1708101062
];
print_r($key);
$parsed = JWK::parseKey($key, "RS256");
print_r($parsed);
print_r($parsed->getKeyMaterial());
$detail = openssl_pkey_get_details($parsed->getKeyMaterial());
print_r($detail);
print_r($detail["key"]);

$id_token = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImY4ZjAxYjZkLTU5MmYtNDVmYi1iZjAwLWFkNWE1ZjliNzg2MiIsInR5cCI6IkpXVCJ9.eyJuYmYiOjE3MDgxMDMxMjEsImV4cCI6MTcwODEwNDkyMSwiaXNzIjoiaHR0cHM6Ly9zbGF0ZWRldi5zaGVyaWRhbmNvbGxlZ2UuY2EiLCJhdWQiOiI0ZWE5NDgxYy03NjU2LTQzYmEtOTk5Ny03ZTllNWU5NzEwMDAiLCJpYXQiOjE3MDgxMDMxMjEsInN1YiI6IjRkOGU2ZjcxLWNjOTUtNDM4MC1hZWNlLTIwODg0NGZmNzFmMF80NDk5MjYiLCJnaXZlbl9uYW1lIjoiU29uZyBIbyIsImZhbWlseV9uYW1lIjoiQWhuIiwibmFtZSI6IlNvbmcgSG8gQWhuIiwiZW1haWwiOiJzb25naG8uYWhuQHNoZXJpZGFuY29sbGVnZS5jYSIsIm5vbmNlIjoibm9uY2UtNjVjZjk1ZDExNWZlZjguMDEyMjY2ODYiLCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS9jbGFpbS9tZXNzYWdlX3R5cGUiOiJMdGlSZXNvdXJjZUxpbmtSZXF1ZXN0IiwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGkvY2xhaW0vdmVyc2lvbiI6IjEuMy4wIiwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGkvY2xhaW0vZGVwbG95bWVudF9pZCI6ImFlZmRjYzNkLTFjNjQtNGIyNy04NzcyLTJhOWUwMWIwM2RjZiIsImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpL2NsYWltL3RhcmdldF9saW5rX3VyaSI6Imh0dHBzOi8vZWpkLnNvbmdoby5jYS93cGg1cC8iLCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS9jbGFpbS9yZXNvdXJjZV9saW5rIjp7ImlkIjoiODI0MzQ3XzI0MTIwIiwidGl0bGUiOiJFSkQgTFRJIChCYXNpYykiLCJkZXNjcmlwdGlvbiI6IlNvbmcncyBINVAgU2l0ZSJ9LCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS9jbGFpbS9yb2xlcyI6WyJodHRwOi8vcHVybC5pbXNnbG9iYWwub3JnL3ZvY2FiL2xpcy92Mi9tZW1iZXJzaGlwI0luc3RydWN0b3IiLCJodHRwOi8vcHVybC5pbXNnbG9iYWwub3JnL3ZvY2FiL2xpcy92Mi9tZW1iZXJzaGlwI0FkbWluaXN0cmF0b3IiLCJodHRwOi8vcHVybC5pbXNnbG9iYWwub3JnL3ZvY2FiL2xpcy92Mi9pbnN0aXR1dGlvbi9wZXJzb24jSW5zdHJ1Y3RvciIsImh0dHA6Ly9wdXJsLmltc2dsb2JhbC5vcmcvdm9jYWIvbGlzL3YyL2luc3RpdHV0aW9uL3BlcnNvbiNBZG1pbmlzdHJhdG9yIl0sImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpL2NsYWltL2NvbnRleHQiOnsiaWQiOiIyNDEyMCIsImxhYmVsIjoiOTYwOTIwNzYyX1dvcmtiZW5jaCIsInRpdGxlIjoiU29uZyBIbyBBaG4iLCJ0eXBlIjpbImh0dHA6Ly9wdXJsLmltc2dsb2JhbC5vcmcvdm9jYWIvbGlzL3YyL2NvdXJzZSNDb3Vyc2VPZmZlcmluZyJdfSwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGkvY2xhaW0vbGlzIjp7ImNvdXJzZV9vZmZlcmluZ19zb3VyY2VkaWQiOiJzbGF0ZWRldi5zaGVyaWRhbmNvbGxlZ2UuY2E6OTYwOTIwNzYyX1dvcmtiZW5jaCIsImNvdXJzZV9zZWN0aW9uX3NvdXJjZWRpZCI6InNsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYTpTZWN0aW9uXzk2MDkyMDc2Ml9Xb3JrYmVuY2giLCJwZXJzb25fc291cmNlZGlkIjoiOTYwOTIwNzYyX0EifSwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGkvY2xhaW0vbGF1bmNoX3ByZXNlbnRhdGlvbiI6eyJsb2NhbGUiOiJlbi1jYSJ9LCJodHRwOi8vd3d3LmJyaWdodHNwYWNlLmNvbSI6eyJ0ZW5hbnRfaWQiOiI0YTk2NWVlNS1iMzI1LTRhZmQtOGQxNy1hNjg5YTY2ZTQxMzYiLCJvcmdfZGVmaW5lZF9pZCI6Ijk2MDkyMDc2Ml9BIiwidXNlcl9pZCI6NDQ5OTI2LCJ1c2VybmFtZSI6ImFoc19hIiwiY29udGVudF90b3BpY19pZCI6MTMzMjg4MjYsIkNvbnRleHQuaWQuaGlzdG9yeSI6IiIsIlJlc291cmNlTGluay5pZC5oaXN0b3J5IjoiIiwibGlua19pZCI6ODI0MzQ3fSwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGktYWdzL2NsYWltL2VuZHBvaW50Ijp7InNjb3BlIjpbImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpLWFncy9zY29wZS9saW5laXRlbSIsImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpLWFncy9zY29wZS9saW5laXRlbS5yZWFkb25seSIsImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpLWFncy9zY29wZS9yZXN1bHQucmVhZG9ubHkiLCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS1hZ3Mvc2NvcGUvc2NvcmUiXSwibGluZWl0ZW0iOiJodHRwczovL3NsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYS9kMmwvYXBpL2x0aS9hZ3MvMi4wL2RlcGxveW1lbnQvYWVmZGNjM2QtMWM2NC00YjI3LTg3NzItMmE5ZTAxYjAzZGNmL29yZ3VuaXQvMjQxMjAvbGluZWl0ZW1zLzhlZTgyZDIyLTIyNmYtNDFjMy1hNTkwLTRkMjUxNjI2YWY4OCIsImxpbmVpdGVtcyI6Imh0dHBzOi8vc2xhdGVkZXYuc2hlcmlkYW5jb2xsZWdlLmNhL2QybC9hcGkvbHRpL2Fncy8yLjAvZGVwbG95bWVudC9hZWZkY2MzZC0xYzY0LTRiMjctODc3Mi0yYTllMDFiMDNkY2Yvb3JndW5pdC8yNDEyMC9saW5laXRlbXMifSwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGktbnJwcy9jbGFpbS9uYW1lc3JvbGVzZXJ2aWNlIjp7ImNvbnRleHRfbWVtYmVyc2hpcHNfdXJsIjoiaHR0cHM6Ly9zbGF0ZWRldi5zaGVyaWRhbmNvbGxlZ2UuY2EvZDJsL2FwaS9sdGkvbnJwcy8yLjAvZGVwbG95bWVudC9hZWZkY2MzZC0xYzY0LTRiMjctODc3Mi0yYTllMDFiMDNkY2Yvb3JndW5pdC8yNDEyMC9tZW1iZXJzaGlwcyIsInNlcnZpY2VfdmVyc2lvbnMiOlsiMi4wIl19LCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS9jbGFpbS90b29sX3BsYXRmb3JtIjp7Imd1aWQiOiI0YTk2NWVlNS1iMzI1LTRhZmQtOGQxNy1hNjg5YTY2ZTQxMzYiLCJwcm9kdWN0X2ZhbWlseV9jb2RlIjoiZGVzaXJlMmxlYXJuIn19.ZaFP4FhMKyzkfD1ApefFWq_LOSlqOQaIMgIhQv1GJKJRfbJFn5gbMzFHDdssNCMiOCskCrA9UivVT8w8U_FFJ3pN2GFMkAdGHiffdk0ddw_h9Y-zGvDwcg1z-Iz8zIExtLLnrDB7d0SJvtU_lwqmjMXILJQgUdu4wjoeC5T8dxYyqabN06qjzJiQD2GuAuXJg0UQSjriDU8l9KP1FBupBeS2uqWx2bjj3SSZ5B4aGi7fAG5rJt0cPAQUomNirk_tyEaeqCtQMWPl20ef1IBOwNXtDy4dABY9GR7mX7ipsGRvAytrqYaH7omsCNpekMEmPBdpkwVNdl3w0LhTyTrd3A";
//$decoded = JWT::decode($id_token, new Key($detail["key"], "RS256"));
//print_r($decoded);

// test LtiDeepLinkingResponse from McGrawHill
$id_token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI4MjAyMDgxNTciLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJoZWNsciIsImNsaWVudF9pZCI6IkxVUkUiLCJleHAiOjE3MDkxNDUzMjUsImV4cGlyZXNfaW4iOjkwMCwiaHR0cHM6Ly9vcGVubGVhcm5pbmcubWhlZHVjYXRpb24uY29tL2NsYWltL2N1c3RvbS9sdGlhLWx1cmUvbHRpYS1oZWNsciI6eyJhdXRvX3BhaXJfYWNjb3VudCI6ZmFsc2UsImluc3RpdHV0aW9uX2xtc19uYW1lIjoiU0hFUklEQU4gQ09MTEVHRSIsImlzX3Vwc2VsbCI6ZmFsc2UsImxtc19kaXNwbGF5X25hbWUiOiJEZXNpcmUyTGVhcm4iLCJsbXNfaW5zdGFsbGF0aW9uX2lkIjoiODE0NjY5ZDktYTJhYS0xMWVkLWE3NDItMGEzMjM4NDE0NjYzIiwibG1zX3NvdXJjZV9uYW1lIjoiTFRJQSIsImxtc191c2VyX3N0YXR1cyI6InVucGFpcmVkIiwibHRpYV9pc3N1ZXIiOiJzbGF0ZWRldi5zaGVyaWRhbmNvbGxlZ2UuY2E6NGE5NjVlZTUtYjMyNS00YWZkLThkMTctYTY4OWE2NmU0MTM2IiwibHRpYV9zdWJqZWN0IjoiNGQ4ZTZmNzEtY2M5NS00MzgwLWFlY2UtMjA4ODQ0ZmY3MWYwXzQ0OTkyNiIsIm9yZ2FuaXphdGlvbl9uYW1lIjoiU0hFUklEQU4gSU5TVElUVVRFIE9GIFRFQ0hOT0xPR1kiLCJvcmdhbml6YXRpb25fc2VnbWVudCI6IkhFIiwib3JnYW5pemF0aW9uX3hpZCI6InVybjpjb20ubWhlZHVjYXRpb24ub3BlbmxlYXJuaW5nOmVudGVycHJpc2UuaWRlbnRpdHkub3JnYW5pemF0aW9uOnByb2QuZ2xvYmFsOm9yZ2FuaXphdGlvbjozZmJiNTlmZS0zNmU2LTQzNzYtOGFiMC1kYmQyNDA2YWVkZGUiLCJyZXR1cm5fdXJsIjoiaHR0cHM6Ly9jb25uZWN0LnJvdXRlci5pbnRlZ3JhdGlvbi5wcm9kLm1oZWR1Y2F0aW9uLmNvbS92MS9sdGl2MXAzL2p3dC9oZWNsclJldHVybiIsInVucGFpciI6ZmFsc2UsInVzZXJfZW1haWwiOiJzb25naG8uYWhuQHNoZXJpZGFuY29sbGVnZS5jYSIsInVzZXJfbmFtZV9mYW1pbHkiOiJBaG4iLCJ1c2VyX25hbWVfZ2l2ZW4iOiJTb25nIEhvIiwidXNlcl9yZXF1ZXN0Ijp7IkN1c3RvbVBhcmFtcyI6eyJjdXN0b21fY29udGV4dF9pZF9oaXN0b3J5IjpbIiJdLCJjdXN0b21faW50ZWdyYXRpb25fdHlwZSI6WyJkZWVwIl0sImN1c3RvbV9sbXNfaW5zdGFsbGF0aW9uX2lkIjpbIjgxNDY2OWQ5LWEyYWEtMTFlZC1hNzQyLTBhMzIzODQxNDY2MyJdLCJjdXN0b21fbG1zX25hbWUiOlsiRGVzaXJlMkxlYXJuIl0sImN1c3RvbV9vcmdhbml6YXRpb25feGlkIjpbInVybjpjb20ubWhlZHVjYXRpb24ub3BlbmxlYXJuaW5nOmVudGVycHJpc2UuaWRlbnRpdHkub3JnYW5pemF0aW9uOnByb2QuZ2xvYmFsOm9yZ2FuaXphdGlvbjozZmJiNTlmZS0zNmU2LTQzNzYtOGFiMC1kYmQyNDA2YWVkZGUiXSwiY3VzdG9tX3Rvb2xfcHJvdmlkZXIiOlsiQ29ubmVjdCJdfSwiSURUb2tlbklzc3VlciI6Imh0dHBzOi8vc2xhdGVkZXYuc2hlcmlkYW5jb2xsZWdlLmNhIiwiSXNBY3BJblByb2dyZXNzIjpmYWxzZSwiSXNVbml2ZXJzYWxBY2Nlc3MiOmZhbHNlLCJMdGkxMUxlZ2FjeVVzZXJJRCI6IiIsImNvbnRlbnRfaXRlbV9yZXR1cm5fdXJsIjoiaHR0cHM6Ly9zbGF0ZWRldi5zaGVyaWRhbmNvbGxlZ2UuY2EvZDJsL2x0aS9kbC9jb250ZW50L29yZ1VuaXRJZC8yNDEyMC9saW5rSWQvODI0MjkyL3BhcmVudE1vZHVsZUlkLzEzMzI4NzM5L3JSdkQ2YWFzaG1LMTB3WWxJT0lSNE9idC1ubWRSNDZRSlBEb2Ftd2ZXTE0lMjU3ZSIsImNvbnRleHRfaWQiOiIyNDEyMCIsImNvbnRleHRfbGFiZWwiOiI5NjA5MjA3NjJfV29ya2JlbmNoIiwiY29udGV4dF90aXRsZSI6IlNvbmcgSG8gQWhuIiwiY3VzdG9tX2NpX3JldHVybl91cmwiOiJodHRwczovL3NsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYS9kMmwvbHRpL2RsL2NvbnRlbnQvb3JnVW5pdElkLzI0MTIwL2xpbmtJZC84MjQyOTIvcGFyZW50TW9kdWxlSWQvMTMzMjg3MzkvclJ2RDZhYXNobUsxMHdZbElPSVI0T2J0LW5tZFI0NlFKUERvYW13ZldMTSUyNTdlIiwiY3VzdG9tX2NvbnRlbnRfYXBpX2lkIjoiMCIsImN1c3RvbV9jb3Vyc2VfYXBpX2lkIjoiMjQxMjAiLCJjdXN0b21faW50ZWdyYXRpb25fdHlwZSI6ImRlZXAiLCJjdXN0b21fbGluZWl0ZW1zX3VybCI6Imh0dHBzOi8vc2xhdGVkZXYuc2hlcmlkYW5jb2xsZWdlLmNhL2QybC9hcGkvbHRpL2Fncy8yLjAvZGVwbG95bWVudC8xNjAwZTdmZC1mMzRiLTRiZGEtODZjNS1hYzI3NGMyZDJjY2Evb3JndW5pdC8yNDEyMC9saW5laXRlbXMiLCJjdXN0b21fbG1zX2luc3RhbGxhdGlvbl9pZCI6IjgxNDY2OWQ5LWEyYWEtMTFlZC1hNzQyLTBhMzIzODQxNDY2MyIsImN1c3RvbV9sbXNfbmFtZSI6IkRlc2lyZTJMZWFybiIsImN1c3RvbV9vcmdhbml6YXRpb25feGlkIjoidXJuOmNvbS5taGVkdWNhdGlvbi5vcGVubGVhcm5pbmc6ZW50ZXJwcmlzZS5pZGVudGl0eS5vcmdhbml6YXRpb246cHJvZC5nbG9iYWw6b3JnYW5pemF0aW9uOjNmYmI1OWZlLTM2ZTYtNDM3Ni04YWIwLWRiZDI0MDZhZWRkZSIsImN1c3RvbV90b29sX3Byb3ZpZGVyIjoiQ29ubmVjdCIsImRhdGEiOiJyUnZENmFhc2htSzEwd1lsSU9JUjRPYnQtbm1kUjQ2UUpQRG9hbXdmV0xNfiIsImRlcGxveW1lbnRfaWQiOiIxNjAwZTdmZC1mMzRiLTRiZGEtODZjNS1hYzI3NGMyZDJjY2EiLCJsYXVuY2hfcHJlc2VudGF0aW9uX3JldHVybl91cmwiOiJodHRwczovL3NsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYS9kMmwvbHRpL2RsL2NvbnRlbnQvb3JnVW5pdElkLzI0MTIwL2xpbmtJZC84MjQyOTIvcGFyZW50TW9kdWxlSWQvMTMzMjg3MzkvclJ2RDZhYXNobUsxMHdZbElPSVI0T2J0LW5tZFI0NlFKUERvYW13ZldMTSUyNTdlIiwibGlzX3BlcnNvbl9jb250YWN0X2VtYWlsX3ByaW1hcnkiOiJzb25naG8uYWhuQHNoZXJpZGFuY29sbGVnZS5jYSIsImxpc19wZXJzb25fbmFtZV9mYW1pbHkiOiJBaG4iLCJsaXNfcGVyc29uX25hbWVfZnVsbCI6IlNvbmcgSG8gQWhuIiwibGlzX3BlcnNvbl9uYW1lX2dpdmVuIjoiU29uZyBIbyIsImxpc19wZXJzb25fc291cmNlZGlkIjoiOTYwOTIwNzYyX0EiLCJsdGlfbWVzc2FnZV90eXBlIjoiTHRpRGVlcExpbmtpbmdSZXF1ZXN0IiwibHRpX3ZlcnNpb24iOiIxLjMuMCIsIm5hbWVzX3JvbGVzX2NvbnRleHRfbWVtYmVyc2hpcF91cmwiOnsiRm9yY2VRdWVyeSI6ZmFsc2UsIkZyYWdtZW50IjoiIiwiSG9zdCI6InNsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYSIsIk9taXRIb3N0IjpmYWxzZSwiT3BhcXVlIjoiIiwiUGF0aCI6Ii9kMmwvYXBpL2x0aS9ucnBzLzIuMC9kZXBsb3ltZW50LzE2MDBlN2ZkLWYzNGItNGJkYS04NmM1LWFjMjc0YzJkMmNjYS9vcmd1bml0LzI0MTIwL21lbWJlcnNoaXBzIiwiUmF3RnJhZ21lbnQiOiIiLCJSYXdQYXRoIjoiIiwiUmF3UXVlcnkiOiIiLCJTY2hlbWUiOiJodHRwcyIsIlVzZXIiOm51bGx9LCJyb2xlcyI6Ikluc3RydWN0b3IiLCJ0b29sX2NvbnN1bWVyX2luZm9fcHJvZHVjdF9mYW1pbHlfY29kZSI6ImRlc2lyZTJsZWFybiIsInRvb2xfY29uc3VtZXJfaW5zdGFuY2VfZ3VpZCI6IjRhOTY1ZWU1LWIzMjUtNGFmZC04ZDE3LWE2ODlhNjZlNDEzNiIsInVzZXJfaWQiOiI0ZDhlNmY3MS1jYzk1LTQzODAtYWVjZS0yMDg4NDRmZjcxZjBfNDQ5OTI2In0sInVzZXJfcm9sZSI6Imluc3RydWN0b3IifSwiaWF0IjoxNzA5MTQ0NDI1LCJpc3MiOiJodHRwczovL3Rva2VuLm1oZWR1Y2F0aW9uLmNvbSIsImp0aSI6IjdhNzA4NzRmLWY1M2MtNDEzZC1iZWY2LWQ2YmNhZmVhMjY4MyIsIm5iZiI6MTcwOTE0NDQyNX0.W01OL5h96e7ED0c1SjA7Koq-o008UyHyW942wcHN--WX6RlCsBZvTWhV3NQScJFclk6QOzbPaYIcbsl-dCXC50hikEVz1cFDdFr1Il38bypOYS-OIfWyZ9OjKh2SB2EhV7T4C2JZ5FnMuutTxgSZV1rB-aHsMLq4tE17XMubr93Hw-UIjEQd5AfZ1foJsZRslSwH7Mfvg8lwV23MfCwgoFaZ5ywHiU8ifhzfdeEyfXgN2QCK1Rg8cpNnWLrXE-6UnRhwty1JIDiL22mCr06dZzUXdRcZlxXKD3J5RQm8HrZaOQz-qNn11afPLYFPsTUzrbukWyWRjebjKYVpDRxbCw";
$tokens = explode(".", $id_token);
$header = json_decode(JWT::urlsafeB64Decode($tokens[0]), true);
$payload = json_decode(JWT::urlsafeB64Decode($tokens[1]), true);
print_r("DEEP LINK\n");
print_r($header);
print_r($payload);

// from DL ejd
$id_token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJkOWQ1Y2Y5YzQ2ZDhmNWMxYzAxODBlYzVjYjZmMjZlZTI0NWNhMGRmNWMwZGU3MTkwZDlmNzEyYWNhODk2ODIifQ.eyJpc3MiOiI0ZWE5NDgxYy03NjU2LTQzYmEtOTk5Ny03ZTllNWU5NzEwMDAiLCJhdWQiOiJodHRwczovL3NsYXRlZGV2LnNoZXJpZGFuY29sbGVnZS5jYSIsImV4cCI6MTcwOTE0ODUyNCwiaWF0IjoxNzA5MTQ3OTI0LCJub25jZSI6Im5vbmNlNGZkODFhOGRkZDViNzA3YjBlZWNhMWIzYTZjNThjMTJkNzcyZDY5YjZiM2U4MDRiMWJkZWU4ZjQ2OGE2N2RiNiIsImh0dHBzOi8vcHVybC5pbXNnbG9iYWwub3JnL3NwZWMvbHRpL2NsYWltL2RlcGxveW1lbnRfaWQiOiJhZWZkY2MzZC0xYzY0LTRiMjctODc3Mi0yYTllMDFiMDNkY2YiLCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS9jbGFpbS9tZXNzYWdlX3R5cGUiOiJMdGlEZWVwTGlua2luZ1Jlc3BvbnNlIiwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGkvY2xhaW0vdmVyc2lvbiI6IjEuMy4wIiwiaHR0cHM6Ly9wdXJsLmltc2dsb2JhbC5vcmcvc3BlYy9sdGktZGwvY2xhaW0vY29udGVudF9pdGVtcyI6W3sidHlwZSI6Imx0aVJlc291cmNlTGluayIsInRpdGxlIjoiRUpEIExUSSIsInVybCI6Imh0dHBzOi8vZWpkLnNvbmdoby5jYS93cGg1cC8iLCJwcmVzZW50YXRpb24iOnsiZG9jdW1lbnRUYXJnZXQiOiJpZnJhbWUifSwiY3VzdG9tIjpbXX1dLCJodHRwczovL3B1cmwuaW1zZ2xvYmFsLm9yZy9zcGVjL2x0aS1kbC9jbGFpbS9kYXRhIjoiRkhaUk1EMjZWblN0dEItNnZtX2ZQdkhKREZLWHVQamMxOFRXcXNkZDBnSX4ifQ.n56XdfKVQiC1rp3v-ZQkPu3x-jRlFIbXBb6zYHJ1Jp-BZe1s6RrObNrVOZkaxD9GNivvoqyJ5SwSVIih9jguJr_L5ubHsBzz6XBLa252Cl3RyCzikRrC6-MNlxUsZz2jHf_tHcJ5qzye53IASnCNQJtqew9RwhN7jxc-39z1VW1sumlMHPlz22jT7MXMRogJJac4OxrTNch_ofhv0fEMY8moSvv36zf6R_Uw35vI8CP3d4ZjhIPet0377a2EXryVHKUZWiV4IGdNt3J-pP4E2YRDlVG8aZ3_dDepb1qYbkPp0jNKTH-pSN3QyZHpnCeIiU02rZB5jtzOZN0Zz3XDd-XJ7xXILqIIdOyhQmr0ZMA1vsoUP3YQNQX7wE4Om0Q_G40G_jTZrpQLCJ48mN3ADcmdpD6IDMt7D-s3zl02349xp4eDFqoUQWnAtLpzWra-6a-XBVylrkhb2EBzWcl_m2vt4OuyXRxW_RhY5wDi5HG9BsQm40Km6Q128CIdq5iYfV-lWo4a78G1GQY3W9RmOQRadJvA2SC1BtFFBMvRCX4ehlU5n3spIJyEMjeILjZ-GYoOHwmLOUNrsagaNCkxAkiAXtGwxhKrLawKM6sqB9vaPTUDA-kglNnyGTSWCSx8Gr9bmCcEEnXl4w6EoV-KYFKxRfUPlGAXcIqhUUPLFkY";
$tokens = explode(".", $id_token);
$header = json_decode(JWT::urlsafeB64Decode($tokens[0]), true);
$payload = json_decode(JWT::urlsafeB64Decode($tokens[1]), true);
print_r("DEEP LINK 2\n");
print_r($header);
print_r($payload);


/*
$key = 'example_key';
$payload = [
    'iss' => 'http://example.org',
    'aud' => 'http://example.com',
    'iat' => 1356999524,
    'nbf' => 1357000000
];

$jwt = JWT::encode($payload, $key, 'HS256');
$decoded = JWT::decode($jwt, new Key($key, 'HS256'));
print_r($decoded);
$decoded_array = (array) $decoded;
print_r($decoded_array);

JWT::$leeway = 60; // $leeway in seconds
$decoded = JWT::decode($jwt, new Key($key, 'HS256'));
print_r($decoded);
*/
?>
